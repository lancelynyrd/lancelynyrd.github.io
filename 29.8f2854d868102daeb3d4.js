(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{znrI:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=function(){return function(){}}(),o=u("tnmA"),i=u("dDrH"),r=u("pMnS"),a=u("oBZk"),b=u("ZZ/e"),s=u("Xqnl"),p=u("2MiI"),c=u("OaWH"),d=u("Ip0R"),g=u("gIcY"),h=u("dWdc"),f=u("8cXe"),m=u("Pn9U"),x=u("gRf5"),y=u("7lBf"),v=u("InIh"),C=function(){function l(l,n){this.philgo=l,this.pc=n,this.showError=!1,this.create=new t.m,this.update=new t.m,this.error=new t.m,this.post={}}return l.prototype.ngOnInit=function(){},l.prototype.doInit=function(l){var n=this;this.reset(),this.post=l,this.post.idx?this.philgo.postGet(this.post.idx).subscribe(function(l){n.isMyPost=l.idx_member===n.philgo.myIdx(),n.mode="update",Object.assign(n.post,l),Array.isArray(n.post.files)||(n.post.files=[])},function(l){n.pc.error(l),n.error.emit(l)}):(this.isMyPost=!0,this.mode="create",this.post.gid=this.philgo.generateGid(),this.post.files=[]),this.callbackPost&&this.callbackPost(this.post,this.extra)},l.prototype.validate=function(){return!!(this.post.content&&this.post.content.trim()||this.post.files&&this.post.files.length)||(this.pc.error(this.pc.t("errorNoContentOrFile")),!1)},l.prototype.onSubmit=function(){var l=this;this.loading||this.validate()&&(this.loading=!0,this.post.idx?this.philgo.postUpdate(this.post).subscribe(function(n){n.action="update",l.update.emit(n),l.post=n},function(n){l.createError(n),l.reset()}):this.philgo.postCreate(this.post).subscribe(function(n){n.action="create",l.create.emit(n)},function(n){l.createError(n),l.reset()}))},l.prototype.onUploaded=function(l){console.log("on uploaded: ",l)},l.prototype.createError=function(l){this.showError&&this.pc.error(l),this.error.emit(l)},l.prototype.reset=function(){this.loading=!1,this.mode=null},Object.defineProperty(l.prototype,"profilePhoto",{get:function(){return this.philgo.myProfilePhotoUrl()?this.philgo.myProfilePhotoUrl():this.AnonymousProfilePhoto?this.AnonymousProfilePhoto:""},enumerable:!0,configurable:!0}),l}(),z=t.nb({encapsulation:0,styles:[[".text-input[_ngcontent-%COMP%]{margin-top:1.5em;border:1px solid rgba(150,150,150,.2);border-radius:.2em}.mt-3[_ngcontent-%COMP%]{margin-top:1em}.mt-4[_ngcontent-%COMP%]{margin-top:2em}.position-relative[_ngcontent-%COMP%]{position:relative}.photo-cover[_ngcontent-%COMP%]{margin:6px 0 0 6px;width:108px;height:108px;background-size:cover;background-position:center;background-repeat:no-repeat;overflow:hidden}.button-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}"]],data:{}});function k(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,2,"ion-thumbnail",[],null,null,null,a.Bb,a.M)),t.ob(1,49152,null,0,b.xb,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,0,"img",[["class","thumb-image"],["style","border-radius: 50%;"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,2,0,n.component.profilePhoto)})}function P(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,7,"div",[["style","display: flex; padding-top: .5em;"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,k)),t.ob(2,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(3,0,null,null,4,"ion-text",[["style","margin-left: .5em;"]],null,null,null,a.zb,a.K)),t.ob(4,49152,null,0,b.vb,[t.h,t.k],null,null),(l()(),t.Hb(5,0,[" "," "])),(l()(),t.pb(6,0,null,0,1,"p",[["style"," margin-top: .5em; "]],null,null,null,null,null)),(l()(),t.Hb(7,null,[" "," "]))],function(l,n){l(n,2,0,n.component.profilePhoto)},function(l,n){var u=n.component;l(n,5,0,u.philgo.myNickname()),l(n,7,0,u.title?u.title:u.pc.t("creatingPost"))})}function I(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,3,"div",[["class","file photo-cover position-relative"]],[[4,"background-image",null]],null,null,null,null)),(l()(),t.pb(1,0,null,null,2,"div",[["style","cursor: pointer; position: absolute; z-index: 987654123; top: 0; padding: .1em; color: red; font-weight: bold; font-size: 24px;"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.zb(l.parent.parent,54).onClickDelete(l.context.$implicit)&&e),e},null,null)),(l()(),t.pb(2,0,null,null,1,"ion-icon",[["name","close-circle"],["slot","icon-only"]],null,null,null,a.cb,a.n)),t.ob(3,49152,null,0,b.B,[t.h,t.k],{name:[0,"name"]},null)],function(l,n){l(n,3,0,"close-circle")},function(l,n){l(n,0,0,"url("+n.context.$implicit.src_thumbnail+")")})}function O(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,3,"div",[["class","display-files"]],null,null,null,null,null)),(l()(),t.pb(1,0,null,null,2,"div",[["class","files"],["style","display: flex; flex-flow: wrap;"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,I)),t.ob(3,278528,null,0,d.i,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.post.files)},null)}function j(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,1,"ion-progress-bar",[["class","mt-3"]],null,null,null,a.nb,a.y)),t.ob(1,49152,null,0,b.X,[t.h,t.k],{value:[0,"value"]},null)],function(l,n){l(n,1,0,t.zb(n.parent,54).uploadPercentage/100)},null)}function w(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,0,"input",[["class","button-cover"],["name","file"],["type","file"]],null,[[null,"change"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.zb(l.parent,54).webUpload(u)&&e),e},null,null))],null,null)}function q(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,1,"ion-icon",[["name","send"],["slot","end"]],null,null,null,a.cb,a.n)),t.ob(1,49152,null,0,b.B,[t.h,t.k],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"send")},null)}function E(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,1,"ion-spinner",[["style","margin-left: .25em;"]],null,null,null,a.xb,a.I)),t.ob(1,49152,null,0,b.qb,[t.h,t.k],null,null)],null,null)}function M(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,54,null,null,null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,P)),t.ob(2,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(3,0,null,null,49,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,o=l.component;return"submit"===n&&(e=!1!==t.zb(l,5).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.zb(l,5).onReset()&&e),"ngSubmit"===n&&(e=!1!==o.onSubmit()&&e),e},null,null)),t.ob(4,16384,null,0,g.l,[],null,null),t.ob(5,4210688,null,0,g.h,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Eb(2048,null,g.a,null,[g.h]),t.ob(7,16384,null,0,g.g,[[4,g.a]],null,null),(l()(),t.pb(8,0,null,null,9,"div",[["class","text-input"]],null,null,null,null,null)),(l()(),t.pb(9,0,null,null,8,"ion-input",[["name","title"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,u){var e=!0,o=l.component;return"ionBlur"===n&&(e=!1!==t.zb(l,12)._handleBlurEvent()&&e),"ionChange"===n&&(e=!1!==t.zb(l,12)._handleInputEvent(u.target.value)&&e),"ngModelChange"===n&&(e=!1!==(o.post.subject=u)&&e),e},a.gb,a.r)),t.ob(10,16384,null,0,g.j,[],{required:[0,"required"]},null),t.Eb(1024,null,g.c,function(l){return[l]},[g.j]),t.ob(12,16384,null,0,b.Ob,[t.k],null,null),t.Eb(1024,null,g.d,function(l){return[l]},[b.Ob]),t.ob(14,671744,null,0,g.i,[[2,g.a],[6,g.c],[8,null],[6,g.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Eb(2048,null,g.e,null,[g.i]),t.ob(16,16384,null,0,g.f,[[4,g.e]],null,null),t.ob(17,49152,null,0,b.F,[t.h,t.k],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(l()(),t.pb(18,0,null,null,9,"div",[["class","text-input"]],null,null,null,null,null)),(l()(),t.pb(19,0,null,null,8,"ion-textarea",[["cols","20"],["name","content"],["required",""],["rows","10"],["style","margin-top: 0;"],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,u){var e=!0,o=l.component;return"ionBlur"===n&&(e=!1!==t.zb(l,22)._handleBlurEvent()&&e),"ionChange"===n&&(e=!1!==t.zb(l,22)._handleInputEvent(u.target.value)&&e),"ngModelChange"===n&&(e=!1!==(o.post.content=u)&&e),e},a.Ab,a.L)),t.ob(20,16384,null,0,g.j,[],{required:[0,"required"]},null),t.Eb(1024,null,g.c,function(l){return[l]},[g.j]),t.ob(22,16384,null,0,b.Ob,[t.k],null,null),t.Eb(1024,null,g.d,function(l){return[l]},[b.Ob]),t.ob(24,671744,null,0,g.i,[[2,g.a],[6,g.c],[8,null],[6,g.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Eb(2048,null,g.e,null,[g.i]),t.ob(26,16384,null,0,g.f,[[4,g.e]],null,null),t.ob(27,49152,null,0,b.wb,[t.h,t.k],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],cols:[3,"cols"],rows:[4,"rows"]},null),(l()(),t.gb(16777216,null,null,1,null,O)),t.ob(29,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,j)),t.ob(31,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(32,0,null,null,20,"div",[["style","display: flex; justify-content: space-between"]],null,null,null,null,null)),(l()(),t.pb(33,0,null,null,9,"div",[["style","left: 0;"]],null,null,null,null,null)),(l()(),t.pb(34,0,null,null,8,"ion-button",[["class","photo-button mt-4"],["expand","full"],["type","button"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.zb(l,54).cordovaUpload()&&e),e},a.T,a.e)),t.ob(35,49152,null,0,b.j,[t.h,t.k],{expand:[0,"expand"],type:[1,"type"]},null),(l()(),t.pb(36,0,null,0,1,"ion-icon",[["name","camera"],["slot","start"]],null,null,null,a.cb,a.n)),t.ob(37,49152,null,0,b.B,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.pb(38,0,null,0,2,"ion-text",[],null,null,null,a.zb,a.K)),t.ob(39,49152,null,0,b.vb,[t.h,t.k],null,null),(l()(),t.Hb(40,0,["",""])),(l()(),t.gb(16777216,null,0,1,null,w)),t.ob(42,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(43,0,null,null,9,"div",[["style","right: 0;"]],null,null,null,null,null)),(l()(),t.pb(44,0,null,null,8,"ion-button",[["class","submit-button mt-4"],["data-role","form-submit-button"],["expand","full"],["type","submit"]],null,null,null,a.T,a.e)),t.ob(45,49152,null,0,b.j,[t.h,t.k],{expand:[0,"expand"],type:[1,"type"]},null),(l()(),t.gb(16777216,null,0,1,null,q)),t.ob(47,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(48,0,null,0,2,"ion-text",[],null,null,null,a.zb,a.K)),t.ob(49,49152,null,0,b.vb,[t.h,t.k],null,null),(l()(),t.Hb(50,0,["",""])),(l()(),t.gb(16777216,null,0,1,null,E)),t.ob(52,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(53,0,null,null,1,"app-philgo-file-upload",[],null,[[null,"uploaded"]],function(l,n,u){var t=!0;return"uploaded"===n&&(t=!1!==l.component.onUploaded(u)&&t),t},h.b,h.a)),t.ob(54,114688,[["upload",4]],0,f.a,[t.z,m.a,x.a,b.a,y.a,v.a],{gid:[0,"gid"],files:[1,"files"],displayFiles:[2,"displayFiles"],displayUploadButton:[3,"displayUploadButton"],displayProgressBar:[4,"displayProgressBar"]},{uploaded:"uploaded"})],function(l,n){var u=n.component;l(n,2,0,u.post&&!u.post.idx),l(n,10,0,""),l(n,14,0,"title",u.post.subject),l(n,17,0,"title",u.pc.t("title"),"","text"),l(n,20,0,""),l(n,24,0,"content",u.post.content),l(n,27,0,"content",u.pc.t("content"),"","20","10"),l(n,29,0,u.post.files&&u.post.files.length),l(n,31,0,t.zb(n,54).uploadPercentage),l(n,35,0,"full","button"),l(n,37,0,"camera"),l(n,42,0,u.pc.isWeb),l(n,45,0,"full","submit"),l(n,47,0,!u.loading),l(n,52,0,u.loading),l(n,54,0,u.post.gid,u.post.files,!1,!1,!1)},function(l,n){var u=n.component;l(n,3,0,t.zb(n,7).ngClassUntouched,t.zb(n,7).ngClassTouched,t.zb(n,7).ngClassPristine,t.zb(n,7).ngClassDirty,t.zb(n,7).ngClassValid,t.zb(n,7).ngClassInvalid,t.zb(n,7).ngClassPending),l(n,9,0,t.zb(n,10).required?"":null,t.zb(n,16).ngClassUntouched,t.zb(n,16).ngClassTouched,t.zb(n,16).ngClassPristine,t.zb(n,16).ngClassDirty,t.zb(n,16).ngClassValid,t.zb(n,16).ngClassInvalid,t.zb(n,16).ngClassPending),l(n,19,0,t.zb(n,20).required?"":null,t.zb(n,26).ngClassUntouched,t.zb(n,26).ngClassTouched,t.zb(n,26).ngClassPristine,t.zb(n,26).ngClassDirty,t.zb(n,26).ngClassValid,t.zb(n,26).ngClassInvalid,t.zb(n,26).ngClassPending),l(n,40,0,u.pc.t("photo")),l(n,50,0,u.pc.t(u.post.idx?"update":"submit"))})}function B(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,8,"ion-card",[["style","text-align: center;"]],null,null,null,a.Z,a.g)),t.ob(1,49152,null,0,b.l,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,6,"ion-card-header",[],null,null,null,a.W,a.i)),t.ob(3,49152,null,0,b.n,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,1,"ion-icon",[["name","alert"],["style","font-size: 3em;"]],null,null,null,a.cb,a.n)),t.ob(5,49152,null,0,b.B,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.pb(6,0,null,0,2,"ion-card-title",[],null,null,null,a.Y,a.k)),t.ob(7,49152,null,0,b.p,[t.h,t.k],null,null),(l()(),t.Hb(8,0,[" "," "]))],function(l,n){l(n,5,0,"alert")},function(l,n){l(n,8,0,n.component.pc.t("-630"))})}function F(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,2,"div",[["style","display: flex; justify-content: center; margin-top: 2em;"]],null,null,null,null,null)),(l()(),t.pb(1,0,null,null,1,"ion-spinner",[],null,null,null,a.xb,a.I)),t.ob(2,49152,null,0,b.qb,[t.h,t.k],null,null)],null,null)}function J(l){return t.Jb(0,[(l()(),t.gb(16777216,null,null,1,null,M)),t.ob(1,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,B)),t.ob(3,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,F)),t.ob(5,16384,null,0,d.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.isMyPost),l(n,3,0,"update"===u.mode&&!u.isMyPost),l(n,5,0,!u.mode)},null)}var U=function(){function l(l,n,u,t){this.activatedRoute=l,this.router=n,this.pc=u,this.a=t,this.title="",this.id="",this.idx=""}return l.prototype.ngOnInit=function(){var l=this;this.activatedRoute.paramMap.subscribe(function(n){l.idx=n.get("idx"),l.id=n.get("id"),l.title=l.pc.t(l.idx?"postUpdate":"postCreate"),l.edit.doInit({post_id:l.id,idx:l.idx})})},l.prototype.openForumPage=function(l){this.a.newOrUpdatedPostForListPage=l,this.router.navigateByUrl("post/list/"+l.post_id)},l}(),L=u("ZYCi"),_=t.nb({encapsulation:0,styles:[[""]],data:{}});function S(l){return t.Jb(0,[t.Fb(402653184,1,{edit:0}),(l()(),t.pb(1,0,null,null,3,"ion-header",[],null,null,null,a.bb,a.m)),t.ob(2,49152,null,0,b.A,[t.h,t.k],null,null),(l()(),t.pb(3,0,null,0,1,"app-header",[],null,null,null,s.b,s.a)),t.ob(4,114688,null,0,p.a,[c.a],{title:[0,"title"]},null),(l()(),t.pb(5,0,null,null,4,"ion-content",[],null,null,null,a.ab,a.l)),t.ob(6,49152,null,0,b.t,[t.h,t.k],null,null),(l()(),t.pb(7,0,null,0,2,"div",[["class","ion-padding"]],null,null,null,null,null)),(l()(),t.pb(8,0,null,null,1,"app-philgo-post-edit-v2",[],null,[[null,"create"],[null,"update"]],function(l,n,u){var t=!0,e=l.component;return"create"===n&&(t=!1!==e.openForumPage(u)&&t),"update"===n&&(t=!1!==e.openForumPage(u)&&t),t},J,z)),t.ob(9,114688,[[1,4]],0,C,[v.a,y.a],null,{create:"create",update:"update"})],function(l,n){l(n,4,0,n.component.title),l(n,9,0)},null)}function R(l){return t.Jb(0,[(l()(),t.pb(0,0,null,null,1,"app-edit",[],null,null,null,S,_)),t.ob(1,114688,null,0,U,[L.a,L.m,y.a,c.a],null,null)],function(l,n){l(n,1,0)},null)}var H=t.lb("app-edit",U,R,{},{},[]),K=u("t/Na"),A=u("7bHZ"),T=u("ZYjt"),X=u("YYJB"),Z=u("lLEl"),N=u("Q7sa"),Y=u("kL+j"),D=u("dEXi"),W=u("WinS");u.d(n,"EditPageModuleNgFactory",function(){return Q});var Q=t.mb(e,[],function(l){return t.wb([t.xb(512,t.j,t.bb,[[8,[o.a,i.a,r.a,H]],[3,t.j],t.x]),t.xb(4608,d.l,d.k,[t.u,[2,d.t]]),t.xb(4608,g.m,g.m,[]),t.xb(4608,b.b,b.b,[t.z,t.g]),t.xb(4608,b.Fb,b.Fb,[b.b,t.j,t.q,d.c]),t.xb(4608,b.Kb,b.Kb,[b.b,t.j,t.q,d.c]),t.xb(5120,t.d,function(l,n,u,t){return[b.Rb(l,n),b.Rb(u,t)]},[b.Qb,d.c,b.Qb,d.c]),t.xb(4608,K.m,K.s,[d.c,t.B,K.q]),t.xb(4608,K.t,K.t,[K.m,K.r]),t.xb(5120,K.a,function(l){return[l]},[K.t]),t.xb(4608,K.p,K.p,[]),t.xb(6144,K.n,null,[K.p]),t.xb(4608,K.l,K.l,[K.n]),t.xb(6144,K.b,null,[K.l]),t.xb(4608,K.g,K.o,[K.b,t.q]),t.xb(4608,K.c,K.c,[K.g]),t.xb(4608,A.a,A.a,[b.Fb]),t.xb(4608,y.a,y.a,[T.b,b.Pb,v.a,A.a]),t.xb(4608,X.a,X.a,[b.Kb]),t.xb(1073742336,d.b,d.b,[]),t.xb(1073742336,g.k,g.k,[]),t.xb(1073742336,g.b,g.b,[]),t.xb(1073742336,b.Cb,b.Cb,[]),t.xb(1073742336,Z.a,Z.a,[]),t.xb(1073742336,N.a,N.a,[]),t.xb(1073742336,K.e,K.e,[]),t.xb(1073742336,K.d,K.d,[]),t.xb(1073742336,Y.a,Y.a,[]),t.xb(1073742336,D.a,D.a,[]),t.xb(1073742336,L.o,L.o,[[2,L.u],[2,L.m]]),t.xb(1073742336,W.a,W.a,[c.a]),t.xb(1073742336,e,e,[]),t.xb(256,b.Qb,void 0,[]),t.xb(256,K.q,"XSRF-TOKEN",[]),t.xb(256,K.r,"X-XSRF-TOKEN",[]),t.xb(1024,L.k,function(){return[[{path:"",component:U}]]},[])])})}}]);